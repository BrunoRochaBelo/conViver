/* Use Open Sans via Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap');

:root {
    --current-skeleton-bg: var(--cv-gray-200);
    --current-skeleton-shimmer-color: rgba(255, 255, 255, 0.3); /* Adjusted shimmer for light */
    /* Primary Colors */
    --cv-primary-blue: #007AFF;
    --cv-primary-green: #34C759;
    --cv-primary-orange: #FF9500;
    --cv-primary-red: #FF3B30;

    /* Grays */
    --cv-gray-100: #F2F2F7; /* System Gray 6 - Light background */
    --cv-gray-200: #E5E5EA; /* System Gray 5 */
    --cv-gray-300: #D1D1D6; /* System Gray 4 */
    --cv-gray-400: #C7C7CC; /* System Gray 3 - Borders, dividers */
    --cv-gray-500: #AEAEB2; /* System Gray 2 - Subtle text, icons */
    --cv-gray-600: #8E8E93; /* System Gray - Body text */
    --cv-gray-700: #636366; /* Darker Gray */
    --cv-gray-800: #3A3A3C; /* System Gray (Darker variant for specific elements if needed) */
    --cv-gray-900: #1C1C1E; /* Almost Black - Primary text on light */

    /* Text Colors */
    --cv-text-primary: var(--cv-gray-900);
    --cv-text-secondary: var(--cv-gray-600);
    --cv-text-placeholder: var(--cv-gray-500);
    --cv-text-on-primary: #FFFFFF;
    --cv-text-link: var(--cv-primary-blue);

    /* Background Colors */
    --cv-bg-light: var(--cv-gray-100); /* Page background */
    --cv-bg-white: #FFFFFF; /* Card, Modal backgrounds */

    /* Semantic Colors */
    --cv-color-success: var(--cv-primary-green);
    --cv-color-warning: var(--cv-primary-orange);
    --cv-color-error: var(--cv-primary-red);
    --cv-color-info: var(--cv-primary-blue); /* Or a dedicated info blue if different */

    /* Semantic Background Colors */
    --cv-color-error-bg: #ffebee; /* Lighter red for backgrounds */
    --cv-color-success-bg: #e8f5e9; /* Lighter green */
    --cv-color-warning-bg: #fff8e1; /* Lighter orange */
    --cv-color-info-bg: #e7f5ff; /* Lighter blue for info backgrounds */


    /* Fonts */
    --cv-font-family-sans-serif: 'Open Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
    --cv-font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

    /* Base Font Sizes - Mobile First */
    --cv-font-size-base: 14px; /* Base for REM calculations on mobile */
    --cv-font-size-text-md: 1rem; /* Standard text size (14px on mobile) */
    --cv-font-size-text-lg: 1.125rem; /* Larger text (16px on mobile) */

    /* Heading Font Sizes - Mobile First */
    --cv-font-size-h1: 1.875rem; /* ~30px */
    --cv-font-size-h2: 1.5rem;    /* ~24px */
    --cv-font-size-h3: 1.25rem;   /* ~20px */
    --cv-font-size-h4: 1.125rem;  /* ~18px */
    --cv-font-size-h5: 1rem;      /* ~16px */
    --cv-font-size-h6: 0.875rem;  /* ~14px */

    /* Spacing (base 8px for mobile, potentially adjusted for desktop) */
    --cv-spacing-xs: 4px;
    --cv-spacing-sm: 8px;
    --cv-spacing-md: 16px;
    --cv-spacing-lg: 24px;
    --cv-spacing-xl: 32px;

    /* Borders */
    --cv-border-radius-sm: 4px;
    --cv-border-radius-md: 8px;
    --cv-border-radius-lg: 12px;
    --cv-border-color: var(--cv-gray-400);
    --cv-border-width: 1px;

    /* Shadows */
    --cv-shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --cv-shadow-md: 0px 2px 4px rgba(0, 0, 0, 0.05), 0px 4px 12px rgba(0, 0, 0, 0.1);
    --cv-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

    /* Dark Theme Palette */
    --cv-dark-primary-blue: #0A84FF;
    --cv-dark-primary-green: #30D158;
    --cv-dark-primary-orange: #FFD60A;
    --cv-dark-primary-red: #FF453A;

    --cv-dark-gray-100: #1C1C1E; /* Page background */
    --cv-dark-gray-200: #2C2C2E; /* Element background */
    --cv-dark-gray-300: #3A3A3C;
    --cv-dark-gray-400: #48484A; /* Borders */
    --cv-dark-gray-500: #636366;
    --cv-dark-gray-600: #8E8E93; /* Subtle text */
    --cv-dark-gray-900: #F2F2F7; /* Primary text */

    --cv-dark-text-primary: var(--cv-dark-gray-900);
    --cv-dark-text-secondary: var(--cv-dark-gray-600);
    --cv-dark-text-placeholder: var(--cv-dark-gray-500);
    --cv-dark-text-on-primary-bg: #FFFFFF;
    --cv-dark-text-link: var(--cv-dark-primary-blue);

    --cv-dark-bg-page: var(--cv-dark-gray-100);
    --cv-dark-bg-element: var(--cv-dark-gray-200);

    --cv-dark-semantic-success: var(--cv-dark-primary-green);
    --cv-dark-semantic-warning: var(--cv-dark-primary-orange);
    --cv-dark-semantic-error: var(--cv-dark-primary-red);
    --cv-dark-semantic-info: var(--cv-dark-primary-blue);

    --cv-dark-color-error-bg: rgba(255, 69, 58, 0.2);
    --cv-dark-color-success-bg: rgba(48, 209, 88, 0.2);
    --cv-dark-color-warning-bg: rgba(255, 214, 10, 0.2);
    --cv-dark-color-info-bg: rgba(10, 132, 255, 0.2); /* Lighter blue for dark info backgrounds */

    --cv-dark-shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
    --cv-dark-shadow-md: 0px 2px 4px rgba(0, 0, 0, 0.3), 0px 4px 12px rgba(0, 0, 0, 0.4);
    --cv-dark-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);

    /* Current Theme Variables (default to light) */
    --current-primary-blue: var(--cv-primary-blue);
    --current-primary-green: var(--cv-primary-green);
    --current-primary-orange: var(--cv-primary-orange);
    --current-primary-red: var(--cv-primary-red);

    --current-text-primary: var(--cv-text-primary);
    --current-text-secondary: var(--cv-text-secondary);
    --current-text-placeholder: var(--cv-text-placeholder);
    --current-text-on-primary: var(--cv-text-on-primary); /* Renamed for clarity from --cv-text-on-primary-bg */
    --current-text-link: var(--cv-text-link);

    --current-bg-light: var(--cv-bg-light); /* Page background */
    --current-bg-white: var(--cv-bg-white); /* Element background */

    --current-border-color: var(--cv-border-color);

    --current-semantic-success: var(--cv-color-success);
    --current-semantic-warning: var(--cv-color-warning);
    --current-semantic-error: var(--cv-color-error);
    --current-semantic-info: var(--cv-color-info);

    --current-color-error-bg: var(--cv-color-error-bg);
    --current-color-success-bg: var(--cv-color-success-bg);
    --current-color-warning-bg: var(--cv-color-warning-bg);
    --current-color-info-bg: var(--cv-color-info-bg);

    --current-shadow-sm: var(--cv-shadow-sm);
    --current-shadow-md: var(--cv-shadow-md);
    --current-shadow-lg: var(--cv-shadow-lg);

    --current-input-focus-shadow: rgba(0, 122, 255, 0.25);
    --current-bg-element: var(--cv-bg-white);
    --current-border-subtle: var(--cv-gray-200);

    /* Alpha colors for buttons */
    --cv-primary-blue-alpha-15: rgba(0, 122, 255, 0.15);
    --cv-gray-100-alpha-50: rgba(242, 242, 247, 0.5);
    --cv-gray-200-alpha-70: rgba(229, 229, 234, 0.7);


    /* Button specific current vars */
    --current-button-default-bg: var(--cv-gray-200);
    --current-button-default-hover-bg: var(--cv-gray-300);
    --current-button-secondary-bg: var(--cv-gray-600);
    --current-button-secondary-hover-bg: var(--cv-gray-700);
    --current-button-disabled-bg: var(--cv-gray-200);
    --current-button-disabled-text: var(--cv-gray-500);
    --current-button-disabled-border: var(--cv-gray-300);

    /* Nav specific current vars */
    --current-nav-bg: var(--cv-gray-100);

    /* Header height variable */
    --cv-header-height: 57px; /* Fallback, adjust based on actual .cv-header final height */
}
@media (min-width: 768px) {
    :root {
        --cv-header-height: 69px; /* Fallback for desktop header height */
    }
}


html[data-theme="dark"] {
    --current-skeleton-bg: var(--cv-dark-gray-300);
    --current-skeleton-shimmer-color: rgba(255, 255, 255, 0.08); /* Adjusted shimmer for dark */
    --current-primary-blue: var(--cv-dark-primary-blue);
    --current-primary-green: var(--cv-dark-primary-green);
    --current-primary-orange: var(--cv-dark-primary-orange);
    --current-primary-red: var(--cv-dark-primary-red);

    --current-text-primary: var(--cv-dark-text-primary);
    --current-text-secondary: var(--cv-dark-text-secondary);
    --current-text-placeholder: var(--cv-dark-text-placeholder);
    --current-text-on-primary: var(--cv-dark-text-on-primary-bg);
    --current-text-link: var(--cv-dark-text-link);

    --current-bg-light: var(--cv-dark-bg-page);
    --current-bg-white: var(--cv-dark-bg-element);

    --current-border-color: var(--cv-dark-gray-400);

    --current-semantic-success: var(--cv-dark-semantic-success);
    --current-semantic-warning: var(--cv-dark-semantic-warning);
    --current-semantic-error: var(--cv-dark-semantic-error);
    --current-semantic-info: var(--cv-dark-semantic-info);

    --current-color-error-bg: var(--cv-dark-color-error-bg);
    --current-color-success-bg: var(--cv-dark-color-success-bg);
    --current-color-warning-bg: var(--cv-dark-color-warning-bg);
    --current-color-info-bg: var(--cv-dark-color-info-bg);

    --current-shadow-sm: var(--cv-dark-shadow-sm);
    --current-shadow-md: var(--cv-dark-shadow-md);
    --current-shadow-lg: var(--cv-dark-shadow-lg);

    --current-input-focus-shadow: rgba(10, 132, 255, 0.35);
    --current-bg-element: var(--cv-dark-bg-element);
    --current-border-subtle: var(--cv-dark-gray-300);

    /* Alpha colors for buttons - Dark */
    --cv-dark-primary-blue-alpha-20: rgba(10, 132, 255, 0.2);
    --cv-dark-gray-100-alpha-50: rgba(28, 28, 30, 0.5); /* Assuming cv-dark-gray-100 is #1C1C1E */
    --cv-dark-gray-200-alpha-70: rgba(44, 44, 46, 0.7); /* Assuming cv-dark-gray-200 is #2C2C2E */

    /* Button specific current vars - Dark */
    --current-button-default-bg: var(--cv-dark-gray-300);
    --current-button-default-hover-bg: var(--cv-dark-gray-400);
    --current-button-secondary-bg: var(--cv-dark-gray-500);
    --current-button-secondary-hover-bg: var(--cv-dark-gray-600);
    --current-button-disabled-bg: var(--cv-dark-gray-300);
    --current-button-disabled-text: var(--cv-dark-gray-500);
    --current-button-disabled-border: var(--cv-dark-gray-400);

    /* Nav specific current vars - Dark */
    --current-nav-bg: var(--cv-dark-bg-element); /* Match element bg for dark nav */
}

html[data-theme="dark"] .feed-item.prio-0 {
    background-color: var(--cv-dark-gray-300); /* Um pouco mais claro que o fundo do card normal no escuro */
    border-left-color: var(--cv-dark-primary-orange); /* Usar a versão escura da cor laranja */
}
/* O ::before do feed-item.prio-0 (emoji) geralmente se adapta bem, mas se precisar de ajuste: */
/* html[data-theme="dark"] .feed-item.prio-0::before { color: var(--some-dark-theme-emoji-color); } */


body {
    font-family: var(--cv-font-family-sans-serif);
    margin: 0;
    background-color: var(--current-bg-light);
    color: var(--current-text-primary);
    line-height: 1.6; /* Slightly increased line-height for better readability */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-size: var(--cv-font-size-text-md); /* Default body text size, uses new var */
    overflow-x: hidden; /* Prevent horizontal scrollbars by default */
}

html {
    font-size: var(--cv-font-size-base); /* Base for REM: 14px on mobile */
    box-sizing: border-box; /* Apply border-box to all elements */
}
*, *:before, *:after {
    box-sizing: inherit;
}


/* Responsive Adjustments for Font Size and Spacing */
/* Tablet Breakpoint */
@media (min-width: 768px) {
    :root {
        --cv-font-size-base: 15px; /* Slightly increase base for tablets */
        /* Update text and heading sizes for tablets if needed, or they can inherit from desktop */
        --cv-font-size-text-md: 1.067rem; /* ~16px on tablet */
        --cv-font-size-text-lg: 1.2rem;   /* ~18px on tablet */

        --cv-font-size-h1: 2rem;      /* ~30px */
        --cv-font-size-h2: 1.667rem;  /* ~25px */
        --cv-font-size-h3: 1.333rem;  /* ~20px */
        --cv-font-size-h4: 1.133rem;  /* ~17px */

        /* Spacing can also be adjusted if needed, e.g. */
        /* --cv-spacing-md: 18px; */
        /* --cv-spacing-lg: 28px; */
    }
    body {
        font-size: var(--cv-font-size-text-md); /* Update body font size for tablet */
    }
}

/* Desktop Breakpoint */
@media (min-width: 1024px) { /* Common desktop breakpoint */
    :root {
        --cv-font-size-base: 16px; /* Standard base for desktop */

        --cv-font-size-text-md: 1rem;    /* 16px on desktop */
        --cv-font-size-text-lg: 1.125rem; /* 18px on desktop */

        --cv-font-size-h1: 2.25rem;   /* ~36px */
        --cv-font-size-h2: 1.875rem;  /* ~30px */
        --cv-font-size-h3: 1.5rem;    /* ~24px */
        --cv-font-size-h4: 1.25rem;   /* ~20px */

        /* Spacing can be further adjusted for desktop */
        /* --cv-spacing-md: 20px; */
        /* --cv-spacing-lg: 30px; */
        /* --cv-spacing-xl: 40px; */
    }
    body {
        font-size: var(--cv-font-size-text-md); /* Update body font size for desktop */
    }
}


/* Main Content Wrapper - Base styles (Mobile first) */
main {
    width: 100%;
    padding: var(--cv-spacing-md); /* Default mobile padding */
    /* Removed margin-left/right auto for full width on mobile */
    flex-grow: 1;
    /* Add margin-top to account for sticky header if nav is not sticky */
    /* margin-top: var(--cv-header-height); */
    /* This will be handled by specific page layouts or body padding-top if nav is also sticky */
    /* Adjusted padding-bottom to be conditional on .has-bottom-nav */
}
body.has-bottom-nav main {
    padding-bottom: calc(var(--cv-bottom-nav-height, 60px) + var(--cv-spacing-md)); /* Add padding for bottom nav */
}

/* Define bottom nav height, 0 if not present */
:root {
    --cv-bottom-nav-height: 0px; /* Default to 0, will be set if bottom nav is active */
}
/* body.has-bottom-nav is added by JS when bottom nav is active */


/* Tablet and larger screens */
@media (min-width: 768px) {
    main {
        padding-left: var(--cv-spacing-lg);
        padding-right: var(--cv-spacing-lg);
        /* Top and bottom padding will be set by .with-sticky-header and .has-bottom-nav contexts */
    }
    /* Bottom nav is typically not shown on tablets/desktops, so no padding adjustment needed here by default */
}

/* Desktop and very large screens - centered content with max-width */
@media (min-width: 1024px) {
    main {
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
        padding-left: var(--cv-spacing-xl);
        padding-right: var(--cv-spacing-xl);
    }
}

/* If using sticky header, main content needs top padding to not be obscured */
main.with-sticky-header {
    padding-top: calc(var(--cv-header-height-mobile, 50px) + var(--cv-spacing-md));
}
@media (min-width: 768px) {
    main.with-sticky-header {
        padding-top: calc(var(--cv-header-height-desktop, 60px) + var(--cv-spacing-lg));
    }
}
/* Default bottom padding for main when not affected by bottom nav */
main:not(body.has-bottom-nav main) {
    padding-bottom: var(--cv-spacing-md);
}
@media (min-width: 768px) {
    main:not(body.has-bottom-nav main) {
        padding-bottom: var(--cv-spacing-lg);
    }
}
@media (min-width: 1024px) {
    main:not(body.has-bottom-nav main) {
        padding-bottom: var(--cv-spacing-xl);
    }
}


/* === Login Page Specific Styles === */
.login-page {
    background-color: var(--current-bg-light);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    font-family: var(--cv-font-family-sans-serif); /* Use variable */
}

.login-page__container {
    width: 100%;
    max-width: 400px;
    padding: var(--cv-spacing-md);
    margin: 0 auto; /* Center container on mobile if screen is wider than max-width */
}

/* login-card enhances cv-card for login specific layout */
.login-card { /* .cv-card provides base styling */
    padding: var(--cv-spacing-lg); /* Use consistent lg spacing for mobile */
}
@media (min-width: 768px) {
    .login-card {
        padding: var(--cv-spacing-lg) var(--cv-spacing-xl); /* More padding for desktop */
    }
}


.login-card__title {
    font-size: var(--cv-font-size-h2); /* Use responsive heading size */
    font-weight: 600;
    color: var(--current-text-primary);
    text-align: center;
    margin-bottom: var(--cv-spacing-sm);
}

.login-card__subtitle {
    font-size: 1rem;
    color: var(--current-text-secondary);
    text-align: center;
    margin-bottom: var(--cv-spacing-lg);
}

.login-form {
    display: flex;
    flex-direction: column;
    gap: var(--cv-spacing-md); /* Use variable, adjusted from 1.25rem */
}

.login-form__input-group {
    display: flex;
    flex-direction: column;
}

.login-form__label {
    font-size: var(--cv-font-size-text-sm); /* Use responsive var */
    color: var(--current-text-secondary);
    margin-bottom: var(--cv-spacing-xs);
}

/* .login-form__input is now .cv-input */

.login-form__button {
    width: 100%;
    margin-top: var(--cv-spacing-sm);
    /* cv-button--large can be defined in components.css for larger default button text/padding if needed */
}

/* loginFeedback is now using .cv-alert for styling, specific login-form__feedback removed */


/* Links for Login, Forgot Password, Register pages - already present later, consolidate if needed */
.login-form__links {
    text-align: center;
    margin-top: var(--cv-spacing-lg); /* Increased margin for better spacing */
}
.login-form__link {
    color: var(--current-text-link);
    text-decoration: none;
    font-size: var(--cv-font-size-text-md); /* Responsive text size */
    padding: var(--cv-spacing-xs) var(--cv-spacing-sm); /* Add padding for easier tapping */
}
.login-form__link:hover {
    text-decoration: underline;
    background-color: var(--cv-gray-100-alpha-50); /* Subtle hover */
}
html[data-theme="dark"] .login-form__link:hover {
    background-color: var(--cv-dark-gray-100-alpha-50);
}
.login-form__link-separator {
    margin: 0 var(--cv-spacing-xs); /* Reduced margin for separator */
    color: var(--current-text-placeholder); /* More subtle separator color */
}


/* === Financeiro Page Specific Styles === */
.financeiro-page {
    background-color: var(--current-bg-light);
    font-family: var(--cv-font-family-sans-serif);
}

.fin-cobrancas-main {
    padding-top: var(--cv-spacing-md); /* Adjusted for mobile */
    padding-bottom: var(--cv-spacing-md);
}
@media (min-width: 768px) {
    .fin-cobrancas-main {
        padding-top: var(--cv-spacing-lg);
        padding-bottom: var(--cv-spacing-lg);
    }
}

.fin-cobrancas__title {
    font-size: var(--cv-font-size-h2); /* Use responsive heading */
    color: var(--current-text-primary);
    margin-bottom: var(--cv-spacing-lg);
    text-align: center;
    font-weight: 600;
}

.fin-cobrancas__dashboard {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Smaller min for mobile */
    gap: var(--cv-spacing-sm);
    margin-bottom: var(--cv-spacing-lg); /* Adjusted margin */
}
@media (min-width: 768px) {
    .fin-cobrancas__dashboard {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Restore for desktop */
        gap: var(--cv-spacing-md);
        margin-bottom: var(--cv-spacing-xl);
    }
}

.fin-summary-card { /* .cv-card provides base */
    padding: var(--cv-spacing-md);
    text-align: center;
}

.fin-summary-card__title {
    font-size: var(--cv-font-size-text-md); /* Use responsive text size */
    color: var(--current-text-secondary);
    margin-bottom: var(--cv-spacing-xs); /* Reduced margin */
}

.fin-summary-card__value {
    font-size: var(--cv-font-size-h3); /* Use responsive heading */
    font-weight: 600;
    color: var(--current-text-primary);
}

.fin-cobrancas__actions {
    display: flex;
    flex-direction: column; /* Stack on mobile */
    gap: var(--cv-spacing-md);
    padding: var(--cv-spacing-md);
    background-color: var(--current-bg-white);
    border-radius: var(--cv-border-radius-md);
    box-shadow: var(--current-shadow-sm);
    margin-bottom: var(--cv-spacing-lg); /* Adjusted margin */
}
@media (min-width: 768px) {
    .fin-cobrancas__actions {
        flex-direction: row; /* Row on desktop */
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--cv-spacing-xl);
    }
}

.fin-actions__group {
    display: flex;
    flex-direction: column; /* Stack filter/sort on mobile */
    gap: var(--cv-spacing-sm);
    width: 100%; /* Full width for mobile */
}
@media (min-width: 768px) {
    .fin-actions__group {
        flex-direction: row; /* Row on desktop */
        align-items: center;
        width: auto; /* Auto width for desktop */
        /* margin-bottom: 0; Removed individual margin-bottom, handled by parent gap */
    }
}
.fin-actions__group .cv-input,
.fin-actions__group .cv-button {
    width: 100%; /* Full width for mobile */
}
@media (min-width: 768px) {
    .fin-actions__group .cv-input,
    .fin-actions__group .cv-button {
        min-width: 150px;
        width: auto; /* Auto width for desktop */
        /* flex-grow: 1; No longer needed due to layout changes */
        /* margin-top/bottom removed as gap handles spacing */
    }
}

.fin-actions__group label {
    font-weight: 500;
    color: var(--current-text-primary);
    margin-bottom: var(--cv-spacing-xs); /* Add margin for stacked labels */
}
@media (min-width: 768px) {
    .fin-actions__group label {
        margin-bottom: 0; /* No margin for row layout */
        margin-right: var(--cv-spacing-sm); /* Add right margin for row layout */
    }
}


.fin-cobrancas__table-section {
    background-color: var(--current-bg-white);
    padding: var(--cv-spacing-md); /* Reduced padding for mobile */
    border-radius: var(--cv-border-radius-lg);
    box-shadow: var(--current-shadow-md);
    overflow-x: auto; /* Enable horizontal scroll for table on small screens */
}
@media (min-width: 768px) {
    .fin-cobrancas__table-section {
        padding: var(--cv-spacing-lg); /* Restore desktop padding */
    }
}

.fin-cobrancas__table {
    margin-top: var(--cv-spacing-md);
    width: 100%;
    min-width: 600px; /* Force scroll on smaller screens if content is wide */
    border-collapse: collapse;
}

.fin-cobrancas__table th,
.fin-cobrancas__table td {
    padding: var(--cv-spacing-sm); /* Consistent padding */
    font-size: var(--cv-font-size-text-md); /* Responsive text size */
}
@media (min-width: 768px) {
    .fin-cobrancas__table th,
    .fin-cobrancas__table td {
        padding: var(--cv-spacing-sm) var(--cv-spacing-md); /* Desktop padding */
    }
}

.fin-cobrancas__table th {
    background-color: var(--current-bg-element);
    color: var(--current-text-primary);
    font-weight: 600;
    text-align: left;
    border-bottom: 2px solid var(--current-border-color);
}

.fin-cobrancas__table td {
    vertical-align: middle;
    border-bottom: 1px solid var(--current-border-subtle);
}

.fin-cobrancas__table .cv-button {
    padding: var(--cv-spacing-xs) var(--cv-spacing-sm);
    font-size: 0.8rem; /* Keep smaller buttons in table */
    margin-right: var(--cv-spacing-xs);
    white-space: nowrap; /* Prevent button text from wrapping */
}
.fin-cobrancas__table .cv-button:last-child {
    margin-right: 0;
}

/* === Dashboard Page General Styles === */
.dashboard-page {
    background-color: var(--current-bg-light);
    font-family: var(--cv-font-family-sans-serif);
}

.db-main {
    padding-top: var(--cv-spacing-md); /* Adjusted for mobile */
    padding-bottom: var(--cv-spacing-md);
}
@media (min-width: 768px) {
    .db-main {
        padding-top: var(--cv-spacing-lg);
        padding-bottom: var(--cv-spacing-lg);
    }
}

.db-section {
    margin-bottom: var(--cv-spacing-lg); /* Adjusted margin */
    background-color: var(--current-bg-white);
    padding: var(--cv-spacing-md); /* Adjusted padding for mobile */
    border-radius: var(--cv-border-radius-lg);
    box-shadow: var(--current-shadow-md);
}
@media (min-width: 768px) {
    .db-section {
        margin-bottom: var(--cv-spacing-xl);
        padding: var(--cv-spacing-lg);
    }
}

.db-section__title {
    font-size: var(--cv-font-size-h3); /* Use responsive heading */
    color: var(--current-text-primary);
    margin-top: 0;
    margin-bottom: var(--cv-spacing-md); /* Adjusted margin */
    padding-bottom: var(--cv-spacing-sm);
    border-bottom: var(--cv-border-width) solid var(--current-primary-blue);
    font-weight: 600;
}
@media (min-width: 768px) {
    .db-section__title {
        font-size: var(--cv-font-size-h2); /* Larger on desktop */
        margin-bottom: var(--cv-spacing-lg);
    }
}

.db-metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Smaller min for mobile */
    gap: var(--cv-spacing-sm);
}
@media (min-width: 768px) {
    .db-metrics-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: var(--cv-spacing-lg);
    }
}

.db-metric-card { /* .cv-card provides base */
    padding: var(--cv-spacing-md); /* Adjusted padding */
}
@media (min-width: 768px) {
    .db-metric-card {
        padding: var(--cv-spacing-lg);
    }
}

.db-metric-card__title {
    font-size: var(--cv-font-size-text-lg); /* Responsive text size */
    color: var(--current-text-secondary);
    margin-top: 0;
    margin-bottom: var(--cv-spacing-xs); /* Reduced margin */
}

.db-metric-card__value {
    font-size: var(--cv-font-size-h2); /* Responsive heading */
    font-weight: 600;
    color: var(--current-primary-blue);
    margin-top: 0;
    margin-bottom: var(--cv-spacing-xs);
}

.db-metric-card__subvalue {
    font-size: var(--cv-font-size-text-md); /* Responsive text size */
    color: var(--current-text-secondary);
    margin-top: 0;
    margin-bottom: var(--cv-spacing-sm);
}

.db-metric-card__list {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: var(--cv-font-size-text-md); /* Responsive text size */
}

.db-metric-card__list li {
    padding: var(--cv-spacing-xs) 0;
    border-bottom: 1px solid var(--current-border-subtle);
}
.db-metric-card__list li:last-child {
    border-bottom: none;
}

/* Specific card accents (optional) */
.db-metric-card--inadimplencia .db-metric-card__value { color: var(--current-semantic-error); }
.db-metric-card--saldo .db-metric-card__value { color: var(--current-semantic-success); }
.db-metric-card--despesas .db-metric-card__title { color: var(--current-primary-orange); }


.db-columns {
    display: grid;
    grid-template-columns: 1fr; /* Single column by default for mobile */
    gap: var(--cv-spacing-lg); /* Adjusted gap */
}

@media (min-width: 992px) { /* Two columns for larger screens */
    .db-columns {
        grid-template-columns: 1fr 1fr;
        gap: var(--cv-spacing-xl);
    }
    .db-columns .db-section {
        margin-bottom: 0; /* Sections in columns don't need bottom margin */
    }
}

.db-alerts-list {
    max-height: 250px; /* Slightly reduced max height for mobile */
    overflow-y: auto;
    padding: 0;
}
@media (min-width: 768px) {
    .db-alerts-list {
        max-height: 300px; /* Restore desktop max height */
    }
}

.db-alert-item {
    padding: var(--cv-spacing-sm); /* Adjusted padding */
    margin-bottom: var(--cv-spacing-sm);
    border-radius: var(--cv-border-radius-sm);
    border: var(--cv-border-width) solid transparent;
    border-left-width: 4px; /* Slightly thinner accent border */
    background-color: var(--current-bg-light);
}
@media (min-width: 768px) {
    .db-alert-item {
        padding: var(--cv-spacing-sm) var(--cv-spacing-md);
        border-left-width: 5px;
    }
}

.db-alert-item:last-child {
    margin-bottom: 0;
}

.db-alert-item__title {
    font-weight: 600; /* Adjusted weight */
    display: block;
    margin-bottom: var(--cv-spacing-xs);
    font-size: var(--cv-font-size-text-lg); /* Responsive text size */
}

.db-alert-item__message {
    font-size: var(--cv-font-size-text-md); /* Responsive text size */
    color: var(--current-text-secondary);
    display: block;
    margin-bottom: var(--cv-spacing-xs);
    line-height: 1.4; /* Improved line height for messages */
}

.db-alert-item__date {
    font-size: 0.8rem; /* Keep small */
    color: var(--current-text-placeholder);
    display: block;
    margin-top: var(--cv-spacing-xs);
    text-align: right;
}

/* Alert Types */
.db-alert-item--normal {
    border-left-color: var(--current-semantic-info);
    background-color: var(--current-bg-element);
}
.db-alert-item--normal .db-alert-item__title {
    color: var(--current-semantic-info);
}

.db-alert-item--alta {
    border-left-color: var(--current-semantic-warning);
    background-color: var(--current-color-warning-bg);
}
.db-alert-item--alta .db-alert-item__title {
    color: var(--current-semantic-warning);
}

.db-alert-item--critica {
    border-left-color: var(--current-semantic-error);
    background-color: var(--current-color-error-bg);
}
.db-alert-item--critica .db-alert-item__title {
    color: var(--current-semantic-error);
}

.db-activity-feed {
    padding: 0;
}

.db-alerts-list p, .db-activity-feed p {
    color: var(--current-text-secondary);
    font-style: italic;
    padding: var(--cv-spacing-md); /* Consistent padding */
}
.db-alerts-list ul, .db-activity-feed ul {
    list-style-type: none;
    padding: var(--cv-spacing-md); /* Consistent padding */
    margin: 0;
}
.db-alerts-list li, .db-activity-feed li {
    padding: var(--cv-spacing-sm) 0;
    border-bottom: 1px dashed var(--current-border-subtle);
    font-size: var(--cv-font-size-text-md); /* Responsive text size */
}
.db-alerts-list li:last-child, .db-activity-feed li:last-child {
    border-bottom: none;
}

.db-activity-feed__subtitle {
    font-size: var(--cv-font-size-text-lg); /* Responsive text size */
    color: var(--current-text-primary);
    margin: 0 var(--cv-spacing-md) var(--cv-spacing-sm) var(--cv-spacing-md); /* Adjusted margins */
    padding-bottom: var(--cv-spacing-xs);
    border-bottom: 1px solid var(--current-border-subtle);
}
@media (min-width: 768px) {
    .db-activity-feed__subtitle {
        margin: 0 var(--cv-spacing-lg) var(--cv-spacing-sm) var(--cv-spacing-lg);
    }
}
.db-activity-feed__subtitle:first-of-type {
    margin-top: 0;
}

.db-quick-access {
    display: grid; /* Use grid for better control on mobile */
    grid-template-columns: 1fr; /* Single column on mobile */
    gap: var(--cv-spacing-sm); /* Smaller gap for mobile */
}
@media (min-width: 576px) { /* Two columns for small tablets / wide mobile */
    .db-quick-access {
        grid-template-columns: 1fr 1fr;
    }
}
@media (min-width: 768px) { /* Flex wrap for larger screens */
    .db-quick-access {
        display: flex;
        flex-wrap: wrap;
        gap: var(--cv-spacing-md);
    }
}

.db-quick-access__button {
    /* .cv-button provides base styling */
    background-color: var(--current-bg-white);
    color: var(--current-primary-blue);
    border: 1px solid var(--current-primary-blue);
    text-align: center;
    width: 100%; /* Full width for grid layout */
}
@media (min-width: 768px) {
    .db-quick-access__button {
        flex-grow: 1; /* Allow to grow in flex layout */
        min-width: 200px; /* Restore min-width for desktop */
        width: auto; /* Auto width for flex layout */
    }
}

.db-quick-access__button:hover {
    background-color: var(--current-primary-blue);
    color: var(--current-text-on-primary);
}

/* Visually hidden class for accessibility */
.visually-hidden {
    position: absolute !important; /* Ensure override */
    width: 1px !important;
    height: 1px !important;
    margin: -1px !important;
    padding: 0 !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    border: 0 !important;
    white-space: nowrap !important; /* Add for robustness */
}


/* Chart Styles */
.db-chart-container {
    margin-top: var(--cv-spacing-md);
    width: 100%;
    max-width: 200px; /* Smaller max width for mobile charts */
    height: auto;
    margin-left: auto;
    margin-right: auto;
}
@media (min-width: 768px) {
    .db-chart-container {
        max-width: 250px; /* Restore desktop max width */
    }
}

.db-chart {
    display: block;
    width: 100% !important;
    height: auto !important;
}

/* === Cleanup of old styles (from styles.css.bak) === */
/* The following selectors were present in the backup but might be deprecated by new component classes or refactored. */
/* It's better to remove them if their functionality is covered by .cv-* classes or new page-specific classes. */

/* Deprecated dashboard styles (functionality moved to .db-section, .db-metric-card etc.) */
.dashboard__metrics,
.dashboard__metric,
.dashboard__metric-title,
.dashboard__metric-value,
.dashboard__metric-list {
    /* display: none !important; */ /* Example of how to hide, but removal is cleaner */
}

/* Deprecated login styles (functionality moved to .login-page, .login-card, .login-form__* etc. and .cv-input) */
.login__container, /* replaced by .login-page__container */
.login__form, /* replaced by .login-form */
.login__label, /* replaced by .login-form__label */
.login__input, /* replaced by .cv-input or .login-form__input (which should now use vars) */
.login__button { /* replaced by .cv-button or .login-form__button (which should use vars) */
    /* display: none !important; */
}
/* End of specific page styles */

/* Inline spinner adjustments, especially within buttons */
/* Moved to components.css as it's part of .cv-button styling */

/* Loading Overlay removed */

/* Message Banner - This can be replaced by the new Global Feedback Toast system */
.message-banner {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    padding: 10px;
    background-color: #333;
    color: white;
    text-align: center;
    /* Place the banner above the sticky header (z-index: 1020) */
    z-index: 1030;
    display: none; /* Initially hidden */
}

.message-banner.success {
    background-color: #4CAF50;
}

.message-banner.error {
    background-color: #f44336;
}

.message-banner.info {
    background-color: #2196F3;
}

/* Tab System Styles */
.cv-tabs {
    display: flex;
    align-items: center;
    margin-top: var(--cv-spacing-lg, 20px);
    margin-bottom: var(--cv-spacing-md); /* Adjusted margin */
    padding: var(--cv-spacing-xs) 0;
    border-bottom: 1px solid var(--current-border-subtle); /* Thinner border for a more iOS-like feel */
    overflow-x: auto; /* Allow horizontal scrolling for tabs on small screens */
    white-space: nowrap; /* Prevent tabs from wrapping */
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
}
/* Hide scrollbar for tab container */
.cv-tabs::-webkit-scrollbar {
    display: none; /* Safari and Chrome */
}
.cv-tabs {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
}


.cv-tabs > .cv-tab-button { /* Ensure direct children are targeted */
    display: inline-block; /* For nowrap to work correctly */
}

.cv-tabs > #open-sort-button,
.cv-tabs > #open-filter-modal-button {
    /* These buttons might need to be positioned differently on mobile,
       perhaps above or below the tab bar, or in a separate actions row. */
    margin-top: var(--cv-spacing-xs);
    margin-bottom: var(--cv-spacing-xs);
    margin-left: var(--cv-spacing-sm); /* Add some space from tabs */
    flex-shrink: 0; /* Prevent buttons from shrinking */
}
/* For desktop, restore previous layout if needed */
@media (min-width: 768px) {
    .cv-tabs {
        overflow-x: visible; /* No scroll needed on desktop */
        white-space: normal; /* Allow wrapping if many tabs */
        border-bottom: 2px solid var(--current-border-subtle); /* Restore thicker border */
    }
    .cv-tabs > #open-sort-button {
        margin-left: auto; /* Push to the right */
    }
    .cv-tabs > #open-filter-modal-button {
        margin-left: var(--cv-spacing-sm); /* Keep space from sort button */
    }
}


#open-sort-button.rotated svg {
    transform: rotate(180deg);
}
#open-sort-button svg {
    transition: transform 0.3s ease;
}

.cv-tab-button {
    padding: var(--cv-spacing-sm) var(--cv-spacing-md); /* Adjusted padding */
    cursor: pointer;
    border: none;
    background-color: transparent;
    font-size: var(--cv-font-size-text-md); /* Use responsive text size */
    font-family: var(--cv-font-family-sans-serif);
    color: var(--current-text-secondary);
    margin-right: var(--cv-spacing-xs); /* Reduced margin */
    border-bottom: 2px solid transparent;
    transition: border-color 0.2s ease, color 0.2s ease; /* Faster transition */
    white-space: nowrap; /* Ensure button text doesn't wrap */
}

.cv-tab-button:hover {
    color: var(--current-primary-blue);
}

.cv-tab-button.active {
    border-bottom-color: var(--current-primary-blue);
    font-weight: 600;
    color: var(--current-primary-blue);
}

.cv-tab-content {
    padding: var(--cv-spacing-md);
    width: 100%;
    max-width: 1200px; /* Max width similar to main content */
    margin-left: auto;
    margin-right: auto;
    box-sizing: border-box;
}

/* Specific adjustment for mural content if it's inside another container */
#content-mural .communication__mural {
    /* If communication__mural is the direct grid container */
    /* display: grid; already applied by .card-grid */
    /* grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); */
    /* gap: var(--cv-spacing-md); */
    /* The above is handled by .card-grid. Ensure .communication__mural has .card-grid class or inherits it. */
    /* If #content-mural itself should be centered, the rule for .cv-tab-content already does that. */
    /* If .communication__mural is an intermediate container that needs centering or width control: */
    width: 100%; /* Take full width of parent .cv-tab-content */
    /* No specific margin needed here if .cv-tab-content handles centering */
}

/* --- Nested Tabs (Sub-Abas) --- */
.cv-subtab-content {
    display: none;
}

.cv-subtab-content.active {
    display: block;
}


/* Styles for new elements in Mural Digital */
.sticky-notices-container {
    margin-bottom: var(--cv-spacing-lg, 20px);
    /* Consider adding a subtle background or border if it needs to be visually distinct */
}

.sticky-notices-container .communication__post {
    background-color: var(--cv-color-warning-bg, #fff3cd); /* Light yellow, using variable */
    border-left: 5px solid var(--cv-primary-orange, #ffeeba); /* Orange accent, using variable */
    /* Add a specific class if sticky posts need more differentiation from regular posts */
}
.sticky-notices-container .communication__post .communication__post-title::before {
    content: "📌 "; /* Add a pin emoji before the title of sticky notes */
}


.filters-container {
    display: flex;
    flex-wrap: wrap; /* Allow wrapping on smaller screens */
    gap: var(--cv-spacing-sm); /* Smaller gap for mobile */
    align-items: stretch; /* Stretch items to fill height */
    flex-direction: column; /* Stack filters vertically on mobile */
    margin-bottom: var(--cv-spacing-md); /* Adjusted margin */
    padding: var(--cv-spacing-md);
    background-color: var(--current-bg-white);
    border-radius: var(--cv-border-radius-md);
    box-shadow: var(--current-shadow-sm);
}
@media (min-width: 768px) {
    .filters-container {
        flex-direction: row; /* Horizontal layout on desktop */
        align-items: center; /* Align items center on desktop */
        gap: var(--cv-spacing-md); /* Restore desktop gap */
        margin-bottom: var(--cv-spacing-lg);
    }
}

.filters-container label {
    margin-right: var(--cv-spacing-xs);
    font-weight: 500;
    color: var(--current-text-secondary);
    margin-bottom: var(--cv-spacing-xs); /* Add margin for stacked labels */
}
@media (min-width: 768px) {
    .filters-container label {
        margin-bottom: 0; /* No bottom margin for row layout */
    }
}

.filters-container .cv-input,
.filters-container .cv-button {
    width: 100%; /* Full width for mobile */
}
@media (min-width: 768px) {
    .filters-container .cv-input,
    .filters-container .cv-button {
        flex-grow: 1; /* Allow inputs/button to grow */
        min-width: 150px;
        width: auto; /* Auto width for desktop */
    }
}
/* Ensure button does not grow excessively if alone in a row */
@media (min-width: 768px) {
    .filters-container .cv-button:not(:last-child) {
        /* flex-grow: 0; */ /* This might be too restrictive, depends on context */
    }
    .filters-container .cv-button {
         flex-grow: 0; /* Generally, buttons shouldn't grow too much */
    }
}


.fab {
    position: fixed;
    bottom: var(--cv-spacing-md); /* Adjusted for mobile, less space from bottom */
    right: var(--cv-spacing-md);  /* Adjusted for mobile */
    width: 56px; /* Standard FAB size */
    height: 56px; /* Standard FAB size */
    background-color: var(--current-primary-blue);
    color: var(--current-text-on-primary);
    border: none;
    border-radius: 50%;
    font-size: var(--cv-font-size-xl); /* Adjusted icon size */
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--current-shadow-md, 0 2px 10px rgba(0,0,0,0.2));
    cursor: pointer;
    z-index: 1050;
    display: none;
    transition: background-color 0.2s ease, transform 0.15s ease-out, box-shadow 0.2s ease-out;
    overflow: hidden; /* Hide parts of lines during transform if needed */
}

/* Rotate the '+' icon into an 'X' when active */
.fab.fab--rotated {
    transform: rotate(45deg);
}

/* Keep rotation when hovering or pressing the button */
.fab.fab--rotated:hover {
    transform: scale(1.05) rotate(45deg);
}

.fab.fab--rotated:active {
    transform: scale(0.95) rotate(45deg);
}


.fab:hover {
    /* iOS FAB hover usually involves a subtle scale and shadow change, not typically color change */
    filter: brightness(95%); /* Slightly darken the primary blue */
    transform: scale(1.05); /* Slight scale up on hover */
    box-shadow: var(--current-shadow-lg); /* More pronounced shadow on hover */
}

.fab:active {
    transform: scale(0.95); /* Press down effect */
    filter: brightness(85%); /* Darker for active state */
    box-shadow: var(--current-shadow-sm); /* Less shadow when pressed */
}

/* Container e menu de opções do FAB */
.fab-menu {
    position: fixed;
    bottom: var(--cv-spacing-md); /* Match FAB positioning */
    right: var(--cv-spacing-md);  /* Match FAB positioning */
    z-index: 1049;
    display: flex;
    flex-direction: column-reverse;
    align-items: flex-end;
}

.fab-menu-options {
    position: absolute; /* Positioned relative to .fab-menu */
    bottom: calc(56px + var(--cv-spacing-sm)); /* (FAB height + gap) */
    right: 0; /* Align with the right edge of the FAB */
    display: none;
    flex-direction: column;
    gap: var(--cv-spacing-sm);
    background-color: var(--current-bg-white);
    padding: var(--cv-spacing-sm);
    border-radius: var(--cv-border-radius-md); /* Slightly smaller radius for menu */
    box-shadow: var(--current-shadow-lg); /* More pronounced shadow for menu */
    min-width: 200px; /* Good minimum width for options */
    z-index: 1051; /* Above FAB's z-index if FAB is separate, or if it's the menu itself */
    animation: fab-options-appear 0.15s ease-out;
}
html[data-theme="dark"] .fab-menu-options {
    background-color: var(--cv-dark-gray-300); /* Darker background for dark theme menu */
    box-shadow: var(--cv-dark-shadow-lg);
}

@keyframes fab-options-appear {
    from {
        opacity: 0;
        transform: translateY(10px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.fab-menu--open .fab-menu-options {
    display: flex;
}
.fab-menu-options .cv-button {
    width: 100%;
    justify-content: flex-start; /* Align text to the left */
    padding: var(--cv-spacing-sm) var(--cv-spacing-md); /* Consistent padding */
    /* Ensure button styles are appropriate for menu items (e.g., borderless or tinted) */
}

.fab-menu > .fab { /* If FAB is a direct child of .fab-menu */
     z-index: 1050; /* Ensure FAB is above options container if they overlap during animation */
}

/* Helper class for loading/error/empty messages */
.cv-loading-message, .cv-error-message, .cv-no-more-message {
    padding: var(--cv-spacing-md);
    text-align: center;
    color: var(--current-text-secondary);
    font-style: italic;
}
.cv-error-message {
    color: var(--current-semantic-error);
}

/* Modal Styles - Apple Inspired */
.cv-modal {
    display: none; /* Hidden by default; JS will set to flex when opened */
    position: fixed;
    z-index: 1050; /* Ensure it's above sticky header/nav but below highest system elements if any */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto; /* Enable scroll if content is too long */
    background-color: rgba(0,0,0,0.4); /* Standard overlay, slightly less dim than before */
    align-items: center;
    justify-content: center;
    padding: var(--cv-spacing-sm); /* Reduced padding for mobile edges */
    box-sizing: border-box;
    align-items: flex-end; /* Default to bottom sheet behavior on mobile */
    justify-content: center; /* Center content vertically if not full height */
}
@media (min-width: 768px) { /* Tablet and desktop: Center modal */
    .cv-modal {
        padding: var(--cv-spacing-md);
        align-items: center;
    }
}


.cv-modal-content {
    background-color: var(--current-bg-white);
    padding: 0;
    border: none;
    width: 100%; /* Full width on mobile */
    max-width: 500px; /* Max width for desktop */
    border-radius: var(--cv-border-radius-lg) var(--cv-border-radius-lg) 0 0; /* Rounded top corners for bottom sheet */
    position: relative; /* Changed from relative to allow absolute positioning of close button if needed */
    box-shadow: var(--current-shadow-lg); /* Consistent shadow */
    display: flex;
    flex-direction: column;
    max-height: 90vh; /* Max height for mobile bottom sheet */
    animation: cv-modal-slide-up 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
@media (min-width: 768px) { /* Desktop: standard modal appearance */
    .cv-modal-content {
        border-radius: var(--cv-border-radius-lg); /* All corners rounded */
        max-height: calc(100vh - var(--cv-spacing-xl) * 2); /* Desktop max height */
        animation: cv-modal-scale-up 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
}


html[data-theme="dark"] .cv-modal-content {
     background-color: var(--cv-dark-gray-200);
     box-shadow: var(--cv-dark-shadow-lg); /* Use consistent dark shadow */
}

.cv-modal-content--padded {
    padding: var(--cv-spacing-md); /* Adjusted padding */
}
@media (min-width: 768px) {
    .cv-modal-content--padded {
        padding: var(--cv-spacing-lg);
    }
}

.cv-modal-header {
    padding: var(--cv-spacing-sm) var(--cv-spacing-md); /* Adjusted padding */
    border-bottom: 1px solid var(--current-border-subtle);
    display: flex;
    align-items: center;
    min-height: 50px; /* Adjusted min-height */
    box-sizing: border-box;
    position: relative;
}
@media (min-width: 768px) {
    .cv-modal-header {
        padding: var(--cv-spacing-md) var(--cv-spacing-lg);
        min-height: 56px;
    }
}

html[data-theme="dark"] .cv-modal-header {
    border-bottom-color: var(--cv-dark-gray-400);
}

.cv-modal-header h2 {
    margin: 0;
    font-size: var(--cv-font-size-text-lg); /* Responsive title size */
    color: var(--current-text-primary);
    font-weight: 600;
    line-height: 1.3;
    text-align: center;
    flex-grow: 1;
    /* Adjust padding for close button, assuming it's 24px wide + 8px spacing */
    padding-left: calc(24px + var(--cv-spacing-sm));
    padding-right: calc(24px + var(--cv-spacing-sm));
}
@media (min-width: 768px) {
    .cv-modal-header h2 {
        font-size: var(--cv-font-size-lg); /* Desktop title size */
        /* Adjust padding for close button, assuming it's 30px wide + 16px spacing */
        padding-left: calc(30px + var(--cv-spacing-md));
        padding-right: calc(30px + var(--cv-spacing-md));
    }
}

.cv-modal-header .cv-modal-close { /* Ensure close button is correctly positioned */
    position: absolute;
    right: var(--cv-spacing-sm); /* Closer for mobile */
    top: 50%;
    transform: translateY(-50%);
}
@media (min-width: 768px) {
    .cv-modal-header .cv-modal-close {
        right: var(--cv-spacing-md); /* Desktop spacing */
    }
}


.cv-modal-body {
    padding: var(--cv-spacing-md); /* Adjusted padding */
    overflow-y: auto;
    flex-grow: 1;
    -webkit-overflow-scrolling: touch;
    font-size: var(--cv-font-size-text-md);
    line-height: 1.6; /* Improved line height */
}
@media (min-width: 768px) {
    .cv-modal-body {
        padding: var(--cv-spacing-lg);
        font-size: var(--cv-font-size-md); /* Restore original desktop size if needed */
    }
}
.cv-modal-body p:first-child {
    margin-top: 0;
}
.cv-modal-body p:last-child {
    margin-bottom: 0;
}

.cv-modal-footer {
    padding: var(--cv-spacing-sm) var(--cv-spacing-md); /* Adjusted padding */
    border-top: 1px solid var(--current-border-subtle);
    display: flex;
    flex-direction: column; /* Stack buttons on mobile by default */
    gap: var(--cv-spacing-sm);
    background-color: var(--current-bg-white);
    border-bottom-left-radius: 0; /* No bottom radius for bottom sheet */
    border-bottom-right-radius: 0;
    min-height: auto; /* Auto height for stacked buttons */
    align-items: stretch; /* Stretch buttons to full width */
    box-sizing: border-box;
}
@media (min-width: 768px) { /* Desktop: row layout for footer buttons */
    .cv-modal-footer {
        flex-direction: row;
        justify-content: flex-end;
        min-height: 50px;
        align-items: center;
        padding: var(--cv-spacing-sm) var(--cv-spacing-lg);
        border-bottom-left-radius: var(--cv-border-radius-lg); /* Restore radius */
        border-bottom-right-radius: var(--cv-border-radius-lg);
    }
}

html[data-theme="dark"] .cv-modal-footer {
    background-color: var(--cv-dark-gray-200);
    border-top-color: var(--cv-dark-gray-400);
}

.cv-modal-footer .cv-button {
    width: 100%; /* Full width for stacked buttons on mobile */
}
@media (min-width: 768px) {
    .cv-modal-footer .cv-button {
        width: auto; /* Auto width for desktop */
    }
}
.cv-modal-footer .cv-button.cv-button--primary {
    /* No specific change needed, inherits from .cv-button */
}


.cv-modal-footer.cv-modal-footer--ios-alert {
    /* On mobile, iOS alerts often have buttons stacked if more than two, or side-by-side if two */
    /* This implementation keeps them stacked on mobile for simplicity, side-by-side on desktop */
    flex-direction: column; /* Stacked on mobile */
    justify-content: center;
    padding: 0;
    gap: 0;
    border-top-color: var(--current-border-color);
}
@media (min-width: 768px) { /* Desktop: Side-by-side for iOS alert buttons */
    .cv-modal-footer.cv-modal-footer--ios-alert {
        flex-direction: row;
    }
    .cv-modal-footer.cv-modal-footer--ios-alert .cv-button:not(:first-child) {
        border-left: 1px solid var(--current-border-color); /* Vertical separators for desktop */
    }
    html[data-theme="dark"] .cv-modal-footer.cv-modal-footer--ios-alert .cv-button:not(:first-child) {
        border-left-color: var(--cv-dark-gray-500);
    }
}

html[data-theme="dark"] .cv-modal-footer.cv-modal-footer--ios-alert {
    border-top-color: var(--cv-dark-gray-500);
}

.cv-modal-footer.cv-modal-footer--ios-alert .cv-button {
    flex-grow: 1;
    border-radius: 0;
    margin: 0;
    padding-top: var(--cv-spacing-md);
    padding-bottom: var(--cv-spacing-md);
    font-size: var(--cv-font-size-text-lg); /* Slightly larger text for alert buttons */
    min-height: 48px;
    border: none;
    background-color: transparent;
    color: var(--current-primary-blue);
    border-top: 1px solid var(--current-border-color); /* Horizontal separators for stacked mobile buttons */
}
.cv-modal-footer.cv-modal-footer--ios-alert .cv-button:first-child {
    border-top: none; /* No top border for the first button in a stack */
}
@media (min-width: 768px) { /* Remove top border for desktop row layout */
    .cv-modal-footer.cv-modal-footer--ios-alert .cv-button {
        border-top: none;
        font-size: var(--cv-font-size-md); /* Restore original desktop size */
    }
}


html[data-theme="dark"] .cv-modal-footer.cv-modal-footer--ios-alert .cv-button {
    color: var(--cv-dark-primary-blue);
    border-top-color: var(--cv-dark-gray-500); /* Dark theme separator for stacked */
}


.cv-modal-footer.cv-modal-footer--ios-alert .cv-button.cv-button--primary,
.cv-modal-footer.cv-modal-footer--ios-alert .cv-button:last-child:not(.cv-button--destructive) {
    font-weight: 600;
}
.cv-modal-footer.cv-modal-footer--ios-alert .cv-button.cv-button--destructive {
    color: var(--current-semantic-error);
    font-weight: 400;
}
html[data-theme="dark"] .cv-modal-footer.cv-modal-footer--ios-alert .cv-button.cv-button--destructive {
    color: var(--cv-dark-semantic-error);
}
.cv-modal-footer.cv-modal-footer--ios-alert .cv-button.cv-button--destructive.cv-button--primary {
    font-weight: 600;
}

.cv-modal-footer.cv-modal-footer--ios-alert .cv-button:hover {
    background-color: var(--cv-gray-100-alpha-50);
}
html[data-theme="dark"] .cv-modal-footer.cv-modal-footer--ios-alert .cv-button:hover {
    background-color: var(--cv-dark-gray-100-alpha-50);
}
.cv-modal-footer.cv-modal-footer--ios-alert .cv-button:active {
    background-color: var(--cv-gray-200-alpha-70);
}
html[data-theme="dark"] .cv-modal-footer.cv-modal-footer--ios-alert .cv-button:active {
    background-color: var(--cv-dark-gray-200-alpha-70);
}


/* Mobile bottom sheet animation */
@keyframes cv-modal-slide-up {
    from {
        opacity: 0.5; /* Start slightly transparent */
        transform: translateY(100%);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
/* Desktop scale-up animation (remains the same) */
@keyframes cv-modal-scale-up {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(20px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}


.cv-modal-close {
    color: var(--current-text-placeholder);
    background-color: transparent;
    border-radius: 50%;
    width: 24px; /* Smaller close button for mobile */
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: var(--cv-spacing-sm); /* Adjusted for mobile header */
    right: var(--cv-spacing-sm);
    font-size: 18px; /* Adjusted icon size */
    font-weight: normal;
    line-height: 1;
    text-decoration: none;
    transition: background-color 0.2s ease, color 0.2s ease;
}
@media (min-width: 768px) { /* Desktop close button */
    .cv-modal-close {
        width: 30px;
        height: 30px;
        top: var(--cv-spacing-md);
        right: var(--cv-spacing-md);
        font-size: 20px;
    }
}

html[data-theme="dark"] .cv-modal-close {
    /* Consistent background for dark theme, or can be themed differently */
    background-color: var(--cv-dark-gray-400);
    color: var(--cv-dark-text-placeholder);
}

.cv-modal-close:hover,
.cv-modal-close:focus {
    color: var(--current-text-primary);
    background-color: var(--cv-gray-300);
    outline: none;
    text-decoration: none;
    cursor: pointer;
}

/* Styling for form elements within modal */
#form-criar-aviso .cv-form-group {
    margin-bottom: var(--cv-spacing-md, 15px);
}

#form-criar-aviso label {
    display: block;
    margin-bottom: var(--cv-spacing-xs, 5px);
    font-weight: 500; /* Or OpenSansSemibold */
    color: var(--current-text-secondary);
}
#form-criar-aviso .cv-input {
    width: 100%; /* Make inputs take full width of their container */
    box-sizing: border-box; /* Include padding and border in the element's total width and height */
}
#form-criar-aviso textarea.cv-input {
    resize: vertical; /* Allow vertical resize, disable horizontal */
    min-height: 80px;
}
#form-criar-aviso select[multiple].cv-input {
    min-height: 100px; /* Make multiple select more usable */
}
#form-criar-aviso .cv-form-group small {
    display: block;
    font-size: 0.85em;
    color: var(--current-text-placeholder);
    margin-top: var(--cv-spacing-xs);
}


.cv-form-actions {
    margin-top: var(--cv-spacing-lg, 20px);
    display: flex;
    justify-content: flex-end; /* Align buttons to the right */
    gap: var(--cv-spacing-sm, 10px); /* Space between buttons */
}
/* .cv-form-actions .cv-button {} */ /* General button styling is applied */

/* Notice Card Action Buttons */
.communication__post-actions {
    margin-top: var(--cv-spacing-md, 15px); /* Use theme variable */
    padding-top: var(--cv-spacing-sm, 10px); /* Use theme variable */
    border-top: 1px solid var(--current-border-subtle, #eee); /* Use theme variable */
    text-align: right;
    display: flex; /* Added for better alignment if needed */
    justify-content: flex-end; /* Align buttons to the right */
    gap: var(--cv-spacing-sm, 8px); /* Space between buttons */
}

.cv-button-link {
    background: none;
    border: none;
    color: var(--current-text-link, #007bff); /* Use theme variable */
    cursor: pointer;
    padding: var(--cv-spacing-xs, 4px) var(--cv-spacing-sm, 8px); /* Use theme variable */
    margin-left: var(--cv-spacing-sm, 8px); /* Use theme variable */
    font-size: 0.9em; /* Slightly smaller than main buttons */
    font-family: var(--cv-font-family-sans-serif); /* Ensure font consistency */
    text-decoration: none; /* Remove default underline for links */
    border-radius: var(--cv-border-radius-sm); /* Consistent border radius */
    transition: background-color 0.2s ease, color 0.2s ease; /* Smooth transition */
}

.cv-button-link:hover {
    text-decoration: underline;
    background-color: var(--cv-gray-100); /* Subtle background on hover */
}

.cv-button-link.danger {
    color: var(--current-semantic-error, #FF3B30); /* Use theme variable for error/danger color */
}
.cv-button-link.danger:hover {
    color: var(--current-semantic-error, #FF3B30); /* Keep color on hover for danger */
    background-color: var(--cv-color-error-bg); /* Light red background for danger hover */
}

/* Meta information in notice card */
.communication__post-meta {
    font-size: 0.85em;
    color: var(--current-text-secondary);
    margin-top: var(--cv-spacing-md);
    padding-top: var(--cv-spacing-sm);
    border-top: 1px dashed var(--current-border-subtle);
}

/* Enquetes Tab Specific Styles */
#content-enquetes .cv-section {
    margin-bottom: var(--cv-spacing-lg); /* Adjusted margin */
    padding-bottom: var(--cv-spacing-md); /* Adjusted padding */
    border-bottom: 1px solid var(--current-border-subtle);
}
@media (min-width: 768px) {
    #content-enquetes .cv-section {
        margin-bottom: var(--cv-spacing-xl);
        padding-bottom: var(--cv-spacing-lg);
    }
}
#content-enquetes .cv-section:last-of-type {
    border-bottom: none;
}
#content-enquetes .cv-section h3 {
    font-size: var(--cv-font-size-h4);
    color: var(--current-text-primary);
    margin-bottom: var(--cv-spacing-md);
}


.enquetes-list .cv-card { /* .cv-card provides base */
    margin-bottom: var(--cv-spacing-md);
    padding: var(--cv-spacing-md);
    /* background-color, border-radius, box-shadow from .cv-card */
}

.enquetes-list .cv-card h4 { /* Poll question */
    font-size: var(--cv-font-size-text-lg); /* Responsive text size */
    color: var(--current-text-primary);
    margin-top: 0;
    margin-bottom: var(--cv-spacing-sm);
}
@media (min-width: 768px) {
    .enquetes-list .cv-card h4 {
        font-size: var(--cv-font-size-lg); /* Larger on desktop */
    }
}

.enquetes-list .cv-card p { /* Poll metadata */
    font-size: var(--cv-font-size-text-md); /* Responsive text size */
    color: var(--current-text-secondary);
    margin-bottom: var(--cv-spacing-xs);
}
.enquetes-list .cv-card p:last-of-type {
    margin-bottom: var(--cv-spacing-sm);
}


.enquetes-list .cv-card .poll-options {
    margin-top: var(--cv-spacing-sm);
    margin-bottom: var(--cv-spacing-md);
    display: flex; /* Allow buttons to wrap */
    flex-wrap: wrap;
    gap: var(--cv-spacing-sm);
}
.enquetes-list .cv-card .poll-options .cv-button {
    /* margin-right and margin-bottom handled by gap */
}
.enquetes-list .cv-card .poll-options label { /* For radio/checkbox options */
    display: block;
    margin-bottom: var(--cv-spacing-xs);
    width: 100%; /* Make labels full width for better tap targets if used with inputs */
}


.enquetes-list .cv-card .poll-status {
    font-size: var(--cv-font-size-text-md); /* Responsive text size */
    margin-top: var(--cv-spacing-sm);
}
.enquetes-list .cv-card .poll-status.voted {
    color: var(--current-semantic-success);
    font-weight: 600;
}
.enquetes-list .cv-card .poll-status.not-voted {
    color: var(--current-semantic-warning);
}
.enquetes-list .cv-card .poll-status.closed {
    color: var(--current-text-placeholder);
}


.enquete-resultados-details {
    padding: var(--cv-spacing-md);
    background-color: var(--current-bg-element); /* Use themed element background */
    border-radius: var(--cv-border-radius-md);
    min-height: auto; /* Auto height */
    margin-bottom: var(--cv-spacing-md);
}
.enquete-resultados-details h4 {
    font-size: var(--cv-font-size-text-lg); /* Responsive */
    margin-bottom: var(--cv-spacing-sm);
}


.js-back-to-active-enquetes {
    margin-top: var(--cv-spacing-sm);
}

/* Form styling for Enquete modal - similar to other forms */
#form-criar-enquete .cv-form-group {
    margin-bottom: var(--cv-spacing-md);
}
#form-criar-enquete label {
    display: block;
    margin-bottom: var(--cv-spacing-xs);
    font-weight: 500;
    color: var(--current-text-secondary);
}
#form-criar-enquete .cv-input { /* Includes textareas, inputs */
    width: 100%;
    box-sizing: border-box;
}
#form-criar-enquete textarea.cv-input {
    resize: vertical;
    min-height: 100px; /* Increased min-height for better usability */
}


/* Enhancements for Poll Cards and Results Display */
.communication__poll-card {
    margin-bottom: var(--cv-spacing-lg);
}

.communication__poll-card h4 {
    font-size: var(--cv-font-size-text-lg); /* Responsive */
    color: var(--current-text-primary);
    margin-bottom: var(--cv-spacing-sm);
}
@media (min-width: 768px) {
    .communication__poll-card h4 {
        font-size: var(--cv-font-size-lg);
    }
}

.communication__poll-card p {
    font-size: var(--cv-font-size-text-md); /* Responsive */
    color: var(--current-text-secondary);
    margin-bottom: var(--cv-spacing-xs);
}
.communication__poll-card p.poll-status {
    margin-top: var(--cv-spacing-sm);
    margin-bottom: var(--cv-spacing-md);
}


.poll-options {
    margin-top: var(--cv-spacing-md);
    margin-bottom: var(--cv-spacing-md);
    display: flex; /* Ensure options (buttons or text) flow well */
    flex-wrap: wrap;
    gap: var(--cv-spacing-sm);
}

.poll-options .cv-button.vote-option {
    /* Spacing handled by gap in .poll-options */
}
.poll-options p strong {
    color: var(--current-text-primary);
}


.view-results { /* Link/button to view results */
    font-size: var(--cv-font-size-text-md); /* Responsive */
}

/* Poll Result Bar Styling */
.poll-result-item {
    margin-bottom: var(--cv-spacing-sm);
}
.poll-result-option-text {
    display: block;
    font-size: var(--cv-font-size-text-md); /* Responsive */
    color: var(--current-text-secondary);
    margin-bottom: var(--cv-spacing-xs);
}
.poll-result-bar-container {
    width: 100%;
    background-color: var(--cv-gray-200);
    border-radius: var(--cv-border-radius-sm);
    overflow: hidden;
}
.poll-result-bar {
    height: 24px; /* Slightly taller bar */
    line-height: 24px;
    color: var(--cv-text-on-primary);
    text-align: center;
    font-size: 0.8rem; /* Smaller text inside bar */
    font-weight: 600;
    border-radius: var(--cv-border-radius-sm);
    transition: width 0.5s ease-in-out;
    white-space: nowrap;
    overflow: hidden;
    padding: 0 var(--cv-spacing-xs);
    box-sizing: border-box;
}

/* Admin Actions for Poll Cards */
.communication__poll-card .admin-actions {
    margin-top: var(--cv-spacing-md);
    padding-top: var(--cv-spacing-sm);
    border-top: 1px solid var(--current-border-subtle);
    text-align: right;
    display: flex;
    justify-content: flex-end;
    gap: var(--cv-spacing-sm);
}

.communication__poll-card .admin-actions .cv-button-link {
    font-size: 0.85em;
    margin-left: 0;
}

/* Chamados Tab Specific Styles */
#content-chamados .cv-section {
    margin-bottom: var(--cv-spacing-lg); /* Adjusted */
    padding-bottom: var(--cv-spacing-md); /* Adjusted */
    border-bottom: 1px solid var(--current-border-subtle);
}
@media (min-width: 768px) {
    #content-chamados .cv-section {
        margin-bottom: var(--cv-spacing-xl);
        padding-bottom: var(--cv-spacing-lg);
    }
}
#content-chamados .cv-section:last-of-type {
    border-bottom: none;
}
#content-chamados .cv-section h3 {
    font-size: var(--cv-font-size-h4); /* Responsive */
    color: var(--current-text-primary);
    margin-bottom: var(--cv-spacing-md);
}

/* Styling for the list of chamados */
.chamados-list .cv-card { /* .cv-card provides base */
    margin-bottom: var(--cv-spacing-md);
    padding: var(--cv-spacing-md);
    cursor: pointer;
    transition: box-shadow 0.2s ease-in-out;
}
.chamados-list .cv-card:hover {
    box-shadow: var(--current-shadow-md);
}
.chamados-list .cv-card h4 { /* Chamado Title */
    font-size: var(--cv-font-size-text-lg); /* Responsive */
    color: var(--current-text-primary);
    margin: 0 0 var(--cv-spacing-xs) 0;
}
@media (min-width: 768px) {
    .chamados-list .cv-card h4 {
        font-size: var(--cv-font-size-lg);
    }
}
.chamados-list .cv-card p { /* metadata */
    font-size: var(--cv-font-size-text-md); /* Responsive */
    color: var(--current-text-secondary);
    margin-bottom: var(--cv-spacing-xs);
}
.chamados-list .cv-card .chamado-status-aberto { color: var(--current-semantic-warning); font-weight: 600; }
.chamados-list .cv-card .chamado-status-em_andamento { color: var(--current-semantic-info); font-weight: 600; }
.chamados-list .cv-card .chamado-status-concluido { color: var(--current-semantic-success); font-weight: 600; }


/* Styling for Chamado Detail View */
.chamado-detail-content {
    padding: var(--cv-spacing-md);
    background-color: var(--current-bg-element);
    border-radius: var(--cv-border-radius-md);
    margin-bottom: var(--cv-spacing-lg);
}
.chamado-detail-content p {
    margin-bottom: var(--cv-spacing-sm);
    line-height: 1.6;
}
.chamado-detail-content strong {
    font-weight: 600;
    color: var(--current-text-primary);
}

.chamado-interactions {
    margin-top: var(--cv-spacing-lg);
}
.chamado-interactions h4 {
    font-size: var(--cv-font-size-text-lg); /* Responsive */
    margin-bottom: var(--cv-spacing-sm);
}
@media (min-width: 768px) {
    .chamado-interactions h4 {
        font-size: var(--cv-font-size-lg);
    }
}
.interaction-item {
    padding: var(--cv-spacing-sm);
    border: 1px solid var(--current-border-subtle);
    border-radius: var(--cv-border-radius-sm);
    margin-bottom: var(--cv-spacing-sm);
    background-color: var(--current-bg-white);
}
.interaction-item p {
    margin: 0 0 var(--cv-spacing-xs) 0;
    white-space: pre-wrap;
}
.interaction-item .meta {
    font-size: 0.8rem; /* Keep small */
    color: var(--current-text-placeholder);
}
.interaction-item .meta .author {
    font-weight: 600;
}

/* Admin-only fields in modal */
#form-criar-chamado .admin-only-field {
    border-top: 1px dashed var(--current-border-subtle);
    margin-top: var(--cv-spacing-md);
    padding-top: var(--cv-spacing-md);
}

/* Form styling for Chamado modal */
#form-criar-chamado .cv-form-group {
    margin-bottom: var(--cv-spacing-md);
}
#form-criar-chamado label {
    display: block;
    margin-bottom: var(--cv-spacing-xs);
    font-weight: 500;
    color: var(--current-text-secondary);
}
#form-criar-chamado .cv-input {
    width: 100%;
    box-sizing: border-box;
}
#form-criar-chamado textarea.cv-input {
    resize: vertical;
    min-height: 100px; /* Consistent with Enquete form */
}

/* Links for Login, Forgot Password, Register pages */
.login-form__links {
    text-align: center;
    margin-top: 15px;
}
.login-form__link {
    color: var(--current-text-link); /* Use theme's link color */
    text-decoration: none;
    font-size: 0.9em;
}
.login-form__link:hover {
    text-decoration: underline;
}
.login-form__link-separator {
    margin: 0 5px;
    color: var(--cv-gray-400); /* Or a suitable separator color from theme */
}

/* Destaque visual para itens prioritários do feed (ex: comunicados urgentes,
   enquetes ativas, lembretes de boleto) */
.feed-item.prio-0 {
    border-left: 4px solid var(--cv-primary-orange); /* Slightly thinner border */
    background-color: var(--current-bg-element); /* Use themed element background */
    position: relative;
    padding-left: var(--cv-spacing-lg); /* Add padding to make space for icon */
}
html[data-theme="dark"] .feed-item.prio-0 {
    background-color: var(--cv-dark-gray-300);
    border-left-color: var(--cv-dark-primary-orange);
}

.feed-item.prio-0::before {
    content: "📌"; /* Using emoji directly */
    position: absolute;
    left: var(--cv-spacing-sm); /* Position icon within new padding */
    top: var(--cv-spacing-md); /* Adjust vertical position */
    font-size: 1.1em; /* Adjust emoji size if needed */
    color: var(--current-primary-orange); /* Match border color */
}
html[data-theme="dark"] .feed-item.prio-0::before {
    color: var(--cv-dark-primary-orange);
}


/* Progressive Image Loading Styles for Feed */
.feed-item__image-container {
    width: 100%;
    /* Definir uma aspect-ratio ajuda a evitar layout shift. Ex: 16/9.
       Ajuste conforme o aspect ratio mais comum das suas imagens. */
    aspect-ratio: 16 / 9;
    background-color: var(--current-border-subtle); /* Cor de fundo enquanto a imagem não carrega */
    margin-bottom: var(--cv-spacing-sm);
    overflow: hidden;
    border-radius: var(--cv-border-radius-sm); /* Smaller radius for images within cards */
}

.feed-item__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    filter: blur(8px); /* Slightly less blur */
    transform: scale(1.05); /* Slightly less scale */
    transition: filter 0.4s ease-out, transform 0.4s ease-out; /* Slightly faster transition */
}

.feed-item__image.loaded {
    filter: blur(0);
    transform: scale(1);
}

/* Removed .feed-item__pin as .prio-0::before handles this */

/* Feed Item Chip/Tag Styles */
.feed-item__tags {
    margin-top: var(--cv-spacing-sm);
    display: flex;
    flex-wrap: wrap;
    gap: var(--cv-spacing-xs);
}

.feed-item__tag {
    background-color: var(--current-bg-element); /* Use themed element background */
    color: var(--current-text-secondary); /* Use secondary text color */
    padding: 2px 6px; /* Smaller padding for tags */
    border-radius: var(--cv-border-radius-sm);
    font-size: 0.7rem; /* Smaller font size */
    font-weight: 500;
    text-transform: uppercase;
    border: 1px solid var(--current-border-subtle); /* Add subtle border */
}
html[data-theme="dark"] .feed-item__tag {
    background-color: var(--cv-dark-gray-400); /* Ensure good contrast on dark */
    color: var(--cv-dark-text-primary);
    border-color: var(--cv-dark-gray-500);
}

/* Type-specific tag colors - ensure good contrast and use theme variables */
.feed-item__tag--aviso { background-color: var(--current-primary-blue); color: var(--current-text-on-primary); border-color: var(--current-primary-blue); }
.feed-item__tag--enquete { background-color: var(--current-primary-green); color: var(--current-text-on-primary); border-color: var(--current-primary-green); }
.feed-item__tag--chamado { background-color: var(--current-primary-orange); color: var(--current-text-on-primary); border-color: var(--current-primary-orange); }
.feed-item__tag--documento { background-color: var(--current-text-secondary); color: var(--current-bg-white); border-color: var(--current-text-secondary); }

html[data-theme="dark"] .feed-item__tag--aviso { background-color: var(--cv-dark-primary-blue); color: var(--cv-dark-text-on-primary-bg); border-color: var(--cv-dark-primary-blue); }
html[data-theme="dark"] .feed-item__tag--enquete { background-color: var(--cv-dark-primary-green); color: var(--cv-dark-text-on-primary-bg); border-color: var(--cv-dark-primary-green); }
html[data-theme="dark"] .feed-item__tag--chamado { background-color: var(--cv-dark-primary-orange); color: var(--cv-dark-text-on-primary-bg); border-color: var(--cv-dark-primary-orange); }
html[data-theme="dark"] .feed-item__tag--documento { background-color: var(--cv-dark-gray-500); color: var(--cv-dark-text-primary); border-color: var(--cv-dark-gray-500); }


/* Page Title Styles */
.cv-page-title {
    font-size: var(--cv-font-size-h1); /* Use responsive H1 */
    margin-bottom: var(--cv-spacing-md); /* Adjusted margin */
    color: var(--current-text-primary);
    font-weight: 600; /* Semibold for titles */
    padding-bottom: var(--cv-spacing-sm);
    border-bottom: 1px solid var(--current-border-subtle);
}
@media (min-width: 768px) {
    .cv-page-title {
        margin-bottom: var(--cv-spacing-lg);
    }
}

/* Actions Section (Filters, Upload Buttons, etc.) */
.cv-section--actions {
    display: flex;
    flex-direction: column; /* Stack on mobile */
    gap: var(--cv-spacing-sm); /* Smaller gap for mobile */
    margin-bottom: var(--cv-spacing-md); /* Adjusted margin */
    padding: var(--cv-spacing-md);
    background-color: var(--current-bg-white);
    border-radius: var(--cv-border-radius-md);
    box-shadow: var(--current-shadow-sm);
}
@media (min-width: 768px) {
    .cv-section--actions {
        flex-direction: row; /* Row layout for desktop */
        align-items: center;
        justify-content: space-between; /* Space out groups of actions */
        gap: var(--cv-spacing-md);
        margin-bottom: var(--cv-spacing-lg);
    }
}
.cv-section--actions .cv-input,
.cv-section--actions .cv-button {
    width: 100%; /* Full width for mobile */
}
@media (min-width: 768px) {
    .cv-section--actions .cv-input {
        min-width: 200px; /* Min width for desktop inputs */
        width: auto; /* Auto width for desktop */
        flex-grow: 1; /* Allow input to grow */
    }
    .cv-section--actions .cv-button {
        min-width: auto; /* Buttons take their content size */
        width: auto;
        flex-grow: 0; /* Buttons don't grow */
    }
}


/* Card Grid - General */
.card-grid {
    display: grid;
    grid-template-columns: 1fr; /* Single column for mobile by default */
    gap: var(--cv-spacing-md);
}
@media (min-width: 576px) { /* Two columns for small tablets / wide mobile */
    .card-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); /* Min width for cards */
    }
}
@media (min-width: 992px) { /* Adjust minmax for larger screens if needed */
    .card-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    }
}

/* Feed Grid (Single Column, Centered) */
.feed-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--cv-spacing-md); /* Adjusted gap */
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
}
@media (min-width: 768px) {
    .feed-grid {
        gap: var(--cv-spacing-lg);
    }
}
.feed-grid .cv-card {
    /* Specific adjustments for cards in feed if needed */
}


/* Styles for .cv-empty-state and .cv-error-state */
.cv-empty-state,
.cv-error-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--cv-spacing-lg) var(--cv-spacing-md); /* Adjusted padding */
    text-align: center;
    min-height: 250px; /* Reduced min-height */
    width: 100%;
    box-sizing: border-box;
    border: 1px dashed var(--current-border-subtle);
    border-radius: var(--cv-border-radius-md); /* Adjusted radius */
    background-color: var(--current-bg-element);
}
@media (min-width: 768px) {
    .cv-empty-state, .cv-error-state {
        padding: var(--cv-spacing-xl) var(--cv-spacing-md);
        min-height: 300px;
        border-radius: var(--cv-border-radius-lg);
    }
}

.cv-empty-state__image {
    max-width: 120px; /* Reduced max-width for mobile */
    height: auto;
    margin-bottom: var(--cv-spacing-md); /* Adjusted margin */
    opacity: 0.7;
}
@media (min-width: 768px) {
    .cv-empty-state__image {
        max-width: 150px;
        margin-bottom: var(--cv-spacing-lg);
    }
}

.cv-empty-state__icon,
.cv-error-state__icon {
    margin-bottom: var(--cv-spacing-md); /* Adjusted margin */
}
.cv-empty-state__icon svg,
.cv-error-state__icon svg {
    width: 48px; /* Smaller icons for mobile */
    height: 48px;
    color: var(--current-text-placeholder);
}
@media (min-width: 768px) {
    .cv-empty-state__icon svg,
    .cv-error-state__icon svg {
        width: 64px;
        height: 64px;
    }
}
.cv-error-state__icon svg {
    color: var(--current-semantic-error);
}

.cv-empty-state__title,
.cv-error-state__title {
    font-size: var(--cv-font-size-h4); /* Responsive heading */
    color: var(--current-text-primary);
    margin-top: 0;
    margin-bottom: var(--cv-spacing-xs);
    font-weight: 600;
}

.cv-empty-state__message,
.cv-empty-state__description,
.cv-error-state__message {
    font-size: var(--cv-font-size-text-md); /* Responsive text size */
    color: var(--current-text-secondary);
    margin-bottom: var(--cv-spacing-md);
    max-width: 90%; /* Ensure text doesn't go too wide on mobile */
    line-height: 1.6;
}
@media (min-width: 768px) {
    .cv-empty-state__message,
    .cv-empty-state__description,
    .cv-error-state__message {
        max-width: 450px; /* Restore max-width for desktop */
    }
}
.cv-empty-state__message:last-of-type {
    margin-bottom: var(--cv-spacing-lg);
}


.cv-empty-state__actions {
    display: flex;
    flex-direction: column;
    gap: var(--cv-spacing-sm);
    align-items: center;
    width: 100%; /* Make actions container full width for mobile */
}
@media (min-width: 576px) {
    .cv-empty-state__actions {
        flex-direction: row;
        justify-content: center; /* Center buttons on wider screens */
        width: auto; /* Auto width for row layout */
    }
}

.cv-empty-state__action,
.cv-error-state__retry-button {
    padding: var(--cv-spacing-sm) var(--cv-spacing-md); /* Adjusted padding */
    font-size: var(--cv-font-size-text-md); /* Responsive text size */
    width: 100%; /* Full width buttons on mobile */
    max-width: 280px; /* Max width for buttons */
}
@media (min-width: 576px) {
    .cv-empty-state__action,
    .cv-error-state__retry-button {
        width: auto; /* Auto width for desktop */
        padding: var(--cv-spacing-sm) var(--cv-spacing-lg);
        font-size: var(--cv-font-size-md); /* Original desktop size */
    }
}
/* End of .cv-empty-state and .cv-error-state styles */


/* Document List (uses .card-grid) */
.document-list {
    /* Uses .card-grid for layout, defined above */
}

.document-item { /* .cv-card provides base */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.document-item__info {
    margin-bottom: var(--cv-spacing-sm);
}

.document-item__title {
    font-size: var(--cv-font-size-text-lg); /* Responsive */
    font-weight: 600;
    color: var(--current-text-primary);
    margin-bottom: var(--cv-spacing-xs);
    line-height: 1.3; /* Improve title readability */
}
@media (min-width: 768px) {
    .document-item__title {
        font-size: var(--cv-font-size-lg);
    }
}

.document-item__meta {
    font-size: var(--cv-font-size-text-md); /* Responsive */
    color: var(--current-text-secondary);
    line-height: 1.4;
}
.document-item__meta span {
    display: block;
    margin-bottom: 2px;
}

.document-item__actions {
    margin-top: auto;
    padding-top: var(--cv-spacing-sm);
    border-top: 1px solid var(--current-border-subtle);
    display: flex;
    flex-wrap: wrap; /* Allow buttons to wrap on small cards */
    justify-content: flex-end;
    gap: var(--cv-spacing-xs); /* Smaller gap for action buttons */
}
.document-item__actions .cv-button {
    font-size: 0.85rem; /* Slightly smaller buttons */
    padding: var(--cv-spacing-xs) var(--cv-spacing-sm);
}


/* Form styling for Document Upload Modal */
#formUploadDocumento .cv-form-group {
    margin-bottom: var(--cv-spacing-md);
}
#formUploadDocumento label {
    display: block;
    margin-bottom: var(--cv-spacing-xs);
    font-weight: 500;
    color: var(--current-text-secondary);
}
#formUploadDocumento .cv-input {
    width: 100%;
    box-sizing: border-box;
}

/* Portaria Cards use .card-grid as well */
/* .card-grid already defined with responsive columns */

/* Espaços Comuns */
.espaco-card {
    display: flex;
    flex-direction: column;
}

.espaco-card h4 {
    margin-top: 0;
    margin-bottom: var(--cv-spacing-sm);
    font-size: var(--cv-font-size-text-lg); /* Responsive */
    color: var(--current-text-primary);
}
@media (min-width: 768px) {
    .espaco-card h4 {
        font-size: var(--cv-font-size-lg);
    }
}


.espaco-card p {
    margin: 0 0 var(--cv-spacing-xs);
    font-size: var(--cv-font-size-text-md); /* Responsive */
    color: var(--current-text-secondary);
}

.espaco-card .espaco-card-actions {
    margin-top: auto; /* Push actions to bottom */
    padding-top: var(--cv-spacing-sm);
    border-top: 1px solid var(--current-border-subtle);
    display: flex;
    flex-wrap: wrap; /* Allow actions to wrap */
    gap: var(--cv-spacing-xs); /* Smaller gap for actions */
    justify-content: flex-end;
}
.espaco-card .espaco-card-actions .cv-button {
    font-size: 0.85rem; /* Smaller buttons in card actions */
}


/* Visitantes & Encomendas Cards (can also use .cv-card as a base) */
.visitante-card,
.encomenda-card {
    /* .cv-card provides base: background, border, padding, shadow, margin-bottom */
    /* Specific styles if needed beyond .cv-card */
}

.visitante-card h4,
.encomenda-card h4 {
    margin-top: 0;
    margin-bottom: var(--cv-spacing-xs);
    font-size: var(--cv-font-size-text-lg); /* Responsive */
    color: var(--current-text-primary);
}
@media (min-width: 768px) {
    .visitante-card h4,
    .encomenda-card h4 {
        font-size: var(--cv-font-size-lg);
    }
}

.visitante-card p,
.encomenda-card p {
    margin: 2px 0;
    font-size: var(--cv-font-size-text-md); /* Responsive */
    color: var(--current-text-secondary);
}

.visitante-card__acoes,
.encomenda-card__acoes {
    margin-top: var(--cv-spacing-sm);
    display: flex;
    flex-wrap: wrap; /* Allow actions to wrap */
    gap: var(--cv-spacing-xs);
}
.visitante-card__acoes .cv-button,
.encomenda-card__acoes .cv-button {
    font-size: 0.85rem; /* Smaller buttons */
}

