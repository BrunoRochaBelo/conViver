<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>conViver - Gestão Financeira</title>
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/financeiro.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body class="financeiro-page">
    <header class="cv-header">
        <div class="cv-container cv-header__container">
            <h1 class="cv-header__title">conViver</h1>
            <nav id="mainNav" aria-label="Navegação principal"></nav>
            <button id="userMenuButton" class="user-avatar"></button>
        </div>
    </header>
    <div id="headerSentinel"></div>
    <div id="userMenuModal" class="cv-modal user-menu-modal">
        <div class="cv-modal-content">
            <header class="cv-modal-header">
                <button type="button" class="cv-modal-close" aria-label="Fechar" id="userMenuClose">&times;</button>
            </header>
            <div class="cv-modal-body">
                <ul class="user-menu-list">
                <li><button id="toggleThemeButton" class="cv-button">Alterar Tema</button></li>
                <li><button id="goProfileButton" class="cv-button">Gerenciar Perfil</button></li>
                <li><button id="userLogoutButton" class="cv-button">Logout</button></li>
            </ul>
            </div>
        </div>
    </div>
    <main class="cv-container fin-cobrancas-main">
        <div id="finTabs" class="cv-tabs fin-subtabs">
            <button class="cv-tab-button active" data-subtab="cobrancas">Cobranças</button>
            <button class="cv-tab-button" data-subtab="despesas">Despesas</button>
            <button class="cv-tab-button" data-subtab="relatorios">Relatórios</button>
            <button class="cv-tab-button" data-subtab="orcamento">Orçamento</button>
            <button class="cv-tab-button" data-subtab="tendencias">Tendências</button>
        </div>

        <div class="cv-tab-content active" id="content-cobrancas">
            <h1 class="fin-cobrancas__title">Emissão e Gestão de Cobranças</h1>

        <section class="db-section fin-cobrancas__dashboard">
            <h2 class="db-section__title">Resumo Financeiro</h2>
            <div class="db-metrics-grid">
                <div class="cv-card fin-summary-card">
                    <h4 class="fin-summary-card__title">Inadimplência</h4>
                    <div class="fin-summary-skeleton js-summary-inadimplencia-skeleton" style="display:none;">
                        <span class="skeleton-block" style="width: 70px; height: 28px; display: block; margin-top: 5px; background-color: #e0e0e0;"></button>
                    </div>
                    <p class="fin-summary-card__value js-summary-inadimplencia">--%</p>
                </div>
                <div class="cv-card fin-summary-card">
                    <h4 class="fin-summary-card__title">Pix no Mês</h4>
                    <div class="fin-summary-skeleton js-summary-pix-skeleton" style="display:none;">
                        <span class="skeleton-block" style="width: 100px; height: 28px; display: block; margin-top: 5px; background-color: #e0e0e0;"></button>
                    </div>
                    <p class="fin-summary-card__value js-summary-pix">R$ --</p>
                </div>
                <div class="cv-card fin-summary-card">
                    <h4 class="fin-summary-card__title">Boletos Pendentes</h4>
                    <div class="fin-summary-skeleton js-summary-pendentes-skeleton" style="display:none;">
                        <span class="skeleton-block" style="width: 50px; height: 28px; display: block; margin-top: 5px; background-color: #e0e0e0;"></button>
                    </div>
                    <p class="fin-summary-card__value js-summary-pendentes">--</p>
                </div>
            </div>
        </section>

        <section class="db-section fin-cobrancas__actions">
            <h2 class="db-section__title visually-hidden">Ações de Cobrança</h2>
            <div class="fin-actions__group">
                <label for="filtroStatusCobranca">Status:</label>
                <select id="filtroStatusCobranca" class="cv-input js-filtro-status-cobranca">
                    <option value="">Todos</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Pago">Pago</option>
                    <option value="Atrasado">Atrasado</option>
                    <option value="Cancelado">Cancelado</option>
                </select>
                <button id="btnLimparFiltroCobranca" class="cv-button cv-button--secondary" style="margin-left: 8px;">Limpar Filtro</button>
            </div>
            <div class="fin-actions__group">
                <button id="btnNovaCobranca" class="cv-button cv-button--primary js-btn-nova-cobranca">Emitir Nova Cobrança</button>
                <button id="btnGerarLote" class="cv-button js-btn-gerar-lote">Gerar Lote Mensal</button>
            </div>
        </section>

        <section class="db-section fin-cobrancas__table-section">
            <h2 class="db-section__title">Lista de Cobranças</h2>
            <div id="financeiro-skeleton" class="feed-skeleton-container" style="display:none;">
                <div class="cv-card feed-skeleton-item"><div class="skeleton-title skeleton-block"></div><div class="skeleton-line skeleton-block"></div><div class="skeleton-line skeleton-block skeleton-line--short"></div></div>
                <div class="cv-card feed-skeleton-item"><div class="skeleton-title skeleton-block"></div><div class="skeleton-line skeleton-block"></div><div class="skeleton-line skeleton-block skeleton-line--short"></div></div>
            </div>
            <div class="card-grid js-lista-cobrancas"></div>
        </section>

        <!-- Modal (inicialmente oculto) -->
        <div id="modalCobranca" class="cv-modal js-modal-cobranca" style="display: none;">
            <div class="cv-modal-content cv-modal-content--padded"> <!-- Padronizado de __content para -content -->
                <button type="button" class="cv-modal-close js-modal-close-cobranca" aria-label="Fechar">&times;</button> <!-- Padronizado de __close para -close -->
                <h3 id="modalCobrancaTitle" class="cv-modal-title">Nova Cobrança</h3> <!-- Padronizado de __title para -title (assumindo que existe ou será estilizado) -->
                <div id="modalCobrancaBody" class="cv-modal-body"> <!-- Padronizado de __body para -body (assumindo que existe ou será estilizado) -->
                    <!-- Formulário ou detalhes aqui -->
                    <p>Conteúdo do modal...</p>
                </div>
            </div>
        </div>
        </div> <!-- fim content-cobrancas -->

        <div class="cv-tab-content" id="content-despesas" style="display:none;">
            <h2>Despesas</h2>
            <div class="grafico-container cv-card" style="padding: 16px; margin-bottom: 20px;">
                <div id="graficoDespesasSkeleton" class="feed-skeleton-container" style="display:none; height: 300px; width:100%; align-items: center; justify-content: center; flex-direction: column; background-color: #f0f0f0; border-radius: 8px;">
                    <div class="skeleton-block" style="width:80%; height: 20px; margin-bottom:15px; background-color: #e0e0e0;"></div>
                    <div class="skeleton-block" style="width:60%; height: 20px; margin-bottom:15px; background-color: #e0e0e0;"></div>
                    <div class="skeleton-block" style="width:70%; height: 20px; background-color: #e0e0e0;"></div>
                     <p style="margin-top:20px; color: #aaa;">Carregando gráfico de despesas...</p>
                </div>
                <canvas id="graficoDespesas" height="300" style="display:none;"></canvas>
            </div>
            <div class="card-grid js-lista-despesas"></div>
            <!-- Adicionar modal para nova despesa se necessário, seguindo o padrão .cv-modal > .cv-modal-content -->
        </div>

        <div class="cv-tab-content" id="content-relatorios" style="display:none;">
            <h2>Relatórios</h2>
            <div class="grafico-container cv-card" style="padding: 16px; margin-bottom: 20px;">
                <div id="graficoBalanceteSkeleton" class="feed-skeleton-container" style="display:none; height: 300px; width:100%; align-items: center; justify-content: center; flex-direction: column; background-color: #f0f0f0; border-radius: 8px;">
                    <div class="skeleton-block" style="width:70%; height: 20px; margin-bottom:15px; background-color: #e0e0e0;"></div>
                    <div class="skeleton-block" style="width:50%; height: 20px; margin-bottom:15px; background-color: #e0e0e0;"></div>
                    <p style="margin-top:20px; color: #aaa;">Carregando gráfico de balancete...</p>
                </div>
                <canvas id="graficoBalancete" height="300" style="display:none;"></canvas>
            </div>
            <!-- Modais para filtros de relatórios, etc. -->
        </div>

        <div class="cv-tab-content" id="content-orcamento" style="display:none;">
            <h2>Orçamento</h2>
            <div class="grafico-container cv-card" style="padding: 16px; margin-bottom: 20px;">
                <div id="graficoOrcamentoSkeleton" class="feed-skeleton-container" style="display:none; height: 300px; width:100%; align-items: center; justify-content: center; flex-direction: column; background-color: #f0f0f0; border-radius: 8px;">
                    <div class="skeleton-block" style="width:75%; height: 20px; margin-bottom:15px; background-color: #e0e0e0;"></div>
                    <div class="skeleton-block" style="width:65%; height: 20px; margin-bottom:15px; background-color: #e0e0e0;"></div>
                    <p style="margin-top:20px; color: #aaa;">Carregando gráfico de orçamento...</p>
                </div>
                <canvas id="graficoOrcamento" height="300" style="display:none;"></canvas>
            </div>
            <!-- Modal para adicionar/editar item de orçamento -->
        </div>

        <div class="cv-tab-content" id="content-tendencias" style="display:none;">
            <h2>Tendências</h2>
            <div class="grafico-container cv-card" style="padding: 16px; margin-bottom: 20px;">
                <div id="graficoTendenciasSkeleton" class="feed-skeleton-container" style="display:none; height: 300px; width:100%; align-items: center; justify-content: center; flex-direction: column; background-color: #f0f0f0; border-radius: 8px;">
                    <div class="skeleton-block" style="width:80%; height: 20px; margin-bottom:15px; background-color: #e0e0e0;"></div>
                    <div class="skeleton-block" style="width:60%; height: 20px; background-color: #e0e0e0;"></div>
                    <p style="margin-top:20px; color: #aaa;">Carregando gráfico de tendências...</p>
                </div>
                <canvas id="graficoTendencias" height="300" style="display:none;"></canvas>
            </div>
        </div>
    </main>
    <script type="module" src="../js/nav.js"></script>
    <script type="module" src="../js/userMenu.js"></script>
    <script type="module" src="../js/financeiro.js"></script>
    <!-- <script type="module" src="../js/main.js"></script> --> <!-- main.js likely imported by financeiro.js if needed -->
</body>
</html>
